<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Para Maribel - Mi Regalo Especial</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    
    .book-container {
      text-align: center;
      width: 100%;
      max-width: 1000px;
    }
    
    h1 {
      color: #d63384;
      margin-bottom: 20px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .book {
      width: 90vw;
      height: 70vh;
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }
    
    .page {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
    }
    
    .page.active {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    
    .page img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }
    
    .controls {
      margin: 25px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .btn {
      background: #d63384;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 16px;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(214, 51, 132, 0.3);
    }
    
    .btn:hover {
      background: #c22575;
      transform: translateY(-2px);
    }
    
    .btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .page-info {
      font-size: 18px;
      color: #333;
      font-weight: bold;
      min-width: 120px;
    }
    
    .music-controls {
      margin: 15px 0;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .music-btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .music-btn:hover {
      background: #45a049;
      transform: scale(1.05);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .book {
        height: 60vh;
        width: 95vw;
      }
      
      h1 {
        font-size: 2em;
      }
      
      .btn {
        padding: 10px 20px;
        font-size: 14px;
      }
    }
    
    .loading {
      color: #666;
      font-style: italic;
    }
    
    .error-message {
      color: #dc3545;
      background: #f8d7da;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      display: none;
    }
  </style>
</head>
<body>
  <div class="book-container">
    <h1>üíñ Para Maribel üíñ</h1>
    
    <div id="errorMessage" class="error-message"></div>
    
    <div class="book" id="book">
      <!-- P√°ginas con im√°genes -->
      <div class="page active" id="page1">
        <img src="PORT.jpg" alt="Portada" onerror="handleImageError(this, 'PORT.jpg')">
      </div>
      <div class="page" id="page2">
        <img src="P1.jpg" alt="P√°gina 1" onerror="handleImageError(this, 'P1.jpg')">
      </div>
      <div class="page" id="page3">
        <img src="P2.jpg" alt="P√°gina 2" onerror="handleImageError(this, 'P2.jpg')">
      </div>
      <div class="page" id="page4">
        <img src="P3.jpg" alt="P√°gina 3" onerror="handleImageError(this, 'P3.jpg')">
      </div>
      <div class="page" id="page5">
        <img src="P4.jpg" alt="P√°gina 4" onerror="handleImageError(this, 'P4.jpg')">
      </div>
      <div class="page" id="page6">
        <img src="P5.jpg" alt="P√°gina 5" onerror="handleImageError(this, 'P5.jpg')">
      </div>
      <div class="page" id="page7">
        <img src="P6.jpg" alt="P√°gina 6" onerror="handleImageError(this, 'P6.jpg')">
      </div>
      <div class="page" id="page8">
        <img src="P7.jpg" alt="P√°gina 7" onerror="handleImageError(this, 'P7.jpg')">
      </div>
      <div class="page" id="page9">
        <img src="P8.jpg" alt="P√°gina 8" onerror="handleImageError(this, 'P8.jpg')">
      </div>
      <div class="page" id="page10">
        <img src="P9.jpg" alt="P√°gina 9" onerror="handleImageError(this, 'P9.jpg')">
      </div>
      <div class="page" id="page11">
        <img src="P10.jpg" alt="P√°gina 10" onerror="handleImageError(this, 'P10.jpg')">
      </div>
      <div class="page" id="page12">
        <img src="P11.jpg" alt="P√°gina 11" onerror="handleImageError(this, 'P11.jpg')">
      </div>
      <div class="page" id="page13">
        <img src="P12.jpg" alt="P√°gina 12" onerror="handleImageError(this, 'P12.jpg')">
      </div>
      <div class="page" id="page14">
        <img src="P13.jpg" alt="P√°gina 13" onerror="handleImageError(this, 'P13.jpg')">
      </div>
      <div class="page" id="page15">
        <img src="P14.jpg" alt="P√°gina 14" onerror="handleImageError(this, 'P14.jpg')">
      </div>
      <div class="page" id="page16">
        <img src="P15.jpg" alt="P√°gina 15" onerror="handleImageError(this, 'P15.jpg')">
      </div>
      <div class="page" id="page17">
        <img src="P16.jpg" alt="P√°gina 16" onerror="handleImageError(this, 'P16.jpg')">
      </div>
      <div class="page" id="page18">
        <img src="CONT.jpg" alt="Contraportada" onerror="handleImageError(this, 'CONT.jpg')">
      </div>
    </div>

    <div class="controls">
      <button class="btn" onclick="previousPage()" id="prevBtn">‚Üê Anterior</button>
      <div class="page-info">
        P√°gina <span id="currentPage">1</span> de 18
      </div>
      <button class="btn" onclick="nextPage()" id="nextBtn">Siguiente ‚Üí</button>
    </div>

    <div class="music-controls">
      <button class="music-btn" onclick="playMusic()" id="playBtn">üéµ Reproducir M√∫sica</button>
      <button class="music-btn" onclick="pauseMusic()" id="pauseBtn">‚è∏Ô∏è Pausar</button>
      <button class="music-btn" onclick="nextSong()" id="nextSongBtn">‚è≠Ô∏è Siguiente Canci√≥n</button>
      <div id="songInfo" style="color: #666; font-size: 14px;">Canci√≥n 1/10</div>
    </div>
  </div>

  <audio id="backgroundMusic">
    <source src="C1.mp3" type="audio/mpeg">
  </audio>

  <script>
    // Variables globales
    let currentPage = 1;
    const totalPages = 18;
    let currentSongIndex = 0;
    const songs = ['C1.mp3', 'C2.mp3', 'C3.mp3', 'C4.mp3', 'C5.mp3', 'C6.mp3', 'C7.mp3', 'C8.mp3', 'C9.mp3', 'C10.mp3'];
    let isPlaying = false;

    // Inicializaci√≥n
    function init() {
      console.log('Iniciando libro virtual...');
      updatePageInfo();
      checkFiles();
    }

    // Verificar archivos
    function checkFiles() {
      const missingFiles = [];
      songs.forEach(song => {
        // Verificaremos cuando intenten reproducirse
      });
    }

    // Navegaci√≥n de p√°ginas
    function showPage(pageNumber) {
      if (pageNumber < 1 || pageNumber > totalPages) return;
      
      // Ocultar p√°gina actual
      const currentPageElement = document.getElementById(`page${currentPage}`);
      if (currentPageElement) {
        currentPageElement.classList.remove('active');
      }

      // Mostrar nueva p√°gina
      const newPageElement = document.getElementById(`page${pageNumber}`);
      if (newPageElement) {
        newPageElement.classList.add('active');
      }

      currentPage = pageNumber;
      updatePageInfo();
    }

    function nextPage() {
      if (currentPage < totalPages) {
        showPage(currentPage + 1);
      }
    }

    function previousPage() {
      if (currentPage > 1) {
        showPage(currentPage - 1);
      }
    }

    function updatePageInfo() {
      document.getElementById('currentPage').textContent = currentPage;
      document.getElementById('prevBtn').disabled = currentPage === 1;
      document.getElementById('nextBtn').disabled = currentPage === totalPages;
    }

    // Control de m√∫sica
    function playMusic() {
      const audio = document.getElementById('backgroundMusic');
      const songToPlay = songs[currentSongIndex];
      
      console.log('Intentando reproducir:', songToPlay);
      
      audio.src = songToPlay;
      audio.play().then(() => {
        isPlaying = true;
        document.getElementById('playBtn').textContent = 'üîä Reproduciendo';
        updateSongInfo();
        hideError();
      }).catch(error => {
        console.error('Error al reproducir:', error);
        showError(`No se pudo cargar la canci√≥n: ${songToPlay}. Verifica que el archivo est√© en el repositorio.`);
      });
    }

    function pauseMusic() {
      const audio = document.getElementById('backgroundMusic');
      audio.pause();
      isPlaying = false;
      document.getElementById('playBtn').textContent = 'üéµ Reproducir M√∫sica';
    }

    function nextSong() {
      currentSongIndex = (currentSongIndex + 1) % songs.length;
      updateSongInfo();
      
      if (isPlaying) {
        playMusic();
      }
    }

    function updateSongInfo() {
      document.getElementById('songInfo').textContent = 
        `Canci√≥n ${currentSongIndex + 1}/${songs.length}`;
    }

    // Manejo de errores
    function handleImageError(img, filename) {
      console.error('Error cargando imagen:', filename);
      img.alt = `Imagen no disponible: ${filename}`;
      img.style.backgroundColor = '#f8f9fa';
      img.style.display = 'flex';
      img.style.alignItems = 'center';
      img.style.justifyContent = 'center';
      img.style.fontSize = '16px';
      img.style.color = '#666';
      img.innerHTML = `‚ùå ${filename}<br><small>No encontrada</small>`;
      
      showError(`La imagen ${filename} no se encontr√≥. Verifica que est√© en el repositorio.`);
    }

    function showError(message) {
      const errorDiv = document.getElementById('errorMessage');
      errorDiv.textContent = message;
      errorDiv.style.display = 'block';
    }

    function hideError() {
      document.getElementById('errorMessage').style.display = 'none';
    }

    // Navegaci√≥n con teclado
    document.addEventListener('keydown', function(event) {
      if (event.key === 'ArrowRight') {
        nextPage();
      } else if (event.key === 'ArrowLeft') {
        previousPage();
      } else if (event.key === ' ') {
        event.preventDefault();
        if (isPlaying) {
          pauseMusic();
        } else {
          playMusic();
        }
      }
    });

    // Navegaci√≥n t√°ctil
    let touchStartX = 0;
    const bookElement = document.getElementById('book');

    bookElement.addEventListener('touchstart', e => {
      touchStartX = e.changedTouches[0].screenX;
    });

    bookElement.addEventListener('touchend', e => {
      const touchEndX = e.changedTouches[0].screenX;
      const difference = touchStartX - touchEndX;
      const swipeThreshold = 50;

      if (Math.abs(difference) > swipeThreshold) {
        if (difference > 0) {
          nextPage();
        } else {
          previousPage();
        }
      }
    });

    // Inicializar cuando se carga la p√°gina
    window.addEventListener('load', init);
  </script>
</body>
</html>
